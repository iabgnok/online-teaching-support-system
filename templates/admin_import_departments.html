{% from "macros.html" import dashboard_nav, unified_styles, page_header %}
<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>{{ title }} - ç®¡ç†å‘˜ä»ªè¡¨æ¿</title>
    {{ unified_styles() }}
    <style>
        .tip { background-color: #e7f3ff; border-left: 5px solid #3498db; padding: 15px; margin-bottom: 20px; border-radius: 5px; }
        .tip code { background-color: #e9ecef; padding: 2px 6px; border-radius: 3px; font-weight: bold; color: #e74c3c; }
        input[type="file"] { margin-bottom: 15px; width: 100%; }
        .sample-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 0.95em;
        }
        .sample-table th {
            background: #34495e;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }
        .sample-table td {
            padding: 10px 12px;
            border-bottom: 1px solid #ecf0f1;
            color: #2c3e50;
        }
        .sample-table tr:hover {
            background: #f8f9fa;
        }
    </style>
</head>
<body>
    <div class="container">
        {{ dashboard_nav('admin') }}
        
        {{ page_header(title, 'æ‰¹é‡å¯¼å…¥é™¢ç³»æ•°æ®') }}

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <div class="content-section">

        <div class="tip">
            <h3>å¯¼å…¥æ–‡ä»¶è¦æ±‚ (CSVæ ¼å¼)</h3>
            <p><strong>å¿…éœ€åˆ—ï¼š</strong></p>
            <ul>
                <li><code>dept_name</code> - é™¢ç³»åç§°ï¼ˆå”¯ä¸€ï¼Œä¸èƒ½ä¸ºç©ºï¼‰</li>
            </ul>
            <p><strong>âš ï¸ é‡è¦æç¤ºï¼š</strong></p>
            <ul>
                <li>CSV æ–‡ä»¶ç¬¬ä¸€è¡Œå¿…é¡»æ˜¯è¡¨å¤´ï¼ˆdept_nameï¼‰</li>
                <li>æ–‡ä»¶ç¼–ç å»ºè®®ä½¿ç”¨ <strong>UTF-8 with BOM</strong></li>
                <li>é™¢ç³»åç§°ä¸èƒ½é‡å¤ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è·³è¿‡å·²å­˜åœ¨çš„é™¢ç³»</li>
                <li><strong>è¯·å…ˆå¯¼å…¥é™¢ç³»ï¼Œå†å¯¼å…¥ç”¨æˆ·æ•°æ®</strong></li>
            </ul>
            <p><strong>ğŸ“‹ ç¤ºä¾‹æ•°æ®ï¼ˆå‰5è¡Œï¼‰ï¼š</strong></p>
            <pre style="background: #f8f9fa; padding: 10px; border-radius: 5px; overflow-x: auto; font-size: 0.85em;">dept_name
è½¯ä»¶å·¥ç¨‹å­¦é™¢
è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯å­¦é™¢
äººå·¥æ™ºèƒ½å­¦é™¢
æ•°æ®ç§‘å­¦å­¦é™¢
ç½‘ç»œç©ºé—´å®‰å…¨å­¦é™¢</pre>
        </div>

        <div class="content-section">
        <form method="POST" enctype="multipart/form-data">
            <div class="form-group">
                <label for="file">é€‰æ‹© CSV æ–‡ä»¶:</label>
                <input type="file" id="file" name="file" accept=".csv" required>
            </div>

            <button type="submit" class="btn btn-primary">ğŸ“¤ ä¸Šä¼ å¹¶å¯¼å…¥æ•°æ®</button>
            <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary">ğŸ”™ è¿”å›ä»ªè¡¨æ¿</a>
        </form>
        </div>

        {% if error_details %}
        <div class="error-details">
            <h4>âš ï¸ è¯¦ç»†é”™è¯¯ä¿¡æ¯ï¼ˆå…± {{ error_details|length }} æ¡ï¼‰</h4>
            <ul>
                {% for error in error_details %}
                    <li>{{ error }}</li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}
    </div>
</body>
</html>
