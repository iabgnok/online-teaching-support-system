# æ•™å­¦è®¡åˆ’åŠæ—¥åŽ†åŒ–æ˜¾ç¤ºåŠŸèƒ½å®žçŽ°æ€»ç»“

## ä¸€ã€æ•°æ®åº“æ¨¡åž‹ (å·²å®žçŽ°)

### 1. TeachingPlan è¡¨ (æ•™å­¦è®¡åˆ’è¡¨)
```
- plan_id (BigInteger, PK)
- teacher_id (BigInteger, FK -> Teacher)
- class_id (BigInteger, FK -> TeachingClass)
- title (String[200]) - è®¡åˆ’æ ‡é¢˜
- description (Text) - è¯¦ç»†æè¿°
- planned_date (DateTime) - è®¡åˆ’æ—¥æœŸ (å·²å»ºç´¢å¼•)
- duration_minutes (Integer) - é¢„è®¡æ—¶é•¿ (åˆ†é’Ÿ)
- sync_to_students (Boolean) - æ˜¯å¦åŒæ­¥åˆ°å­¦ç”Ÿç«¯
- created_at, updated_at (DateTime) - æ—¶é—´æˆ³
```

### 2. PersonalTask è¡¨ (ä¸ªäººä»»åŠ¡è¡¨)
```
- task_id (BigInteger, PK)
- student_id (BigInteger, FK -> Student)
- title (String[200]) - ä»»åŠ¡æ ‡é¢˜
- description (Text) - ä»»åŠ¡æè¿°
- planned_date (DateTime) - è®¡åˆ’å®Œæˆæ—¥æœŸ (å·²å»ºç´¢å¼•)
- duration_minutes (Integer) - é¢„è®¡æ—¶é•¿
- is_completed (Boolean) - æ˜¯å¦å®Œæˆ
- completed_at (DateTime) - å®Œæˆæ—¶é—´
- priority (String[20]) - ä¼˜å…ˆçº§ (low/normal/high)
- created_at, updated_at (DateTime) - æ—¶é—´æˆ³
```

## äºŒã€API ç«¯ç‚¹ (å·²å®žçŽ°)

### æ•™å­¦è®¡åˆ’ API (å‰ç¼€: /api/v1)
1. **GET /teaching-plans** - èŽ·å–æ•™å­¦è®¡åˆ’åˆ—è¡¨
   - æƒé™: æ•™å¸ˆ
   - å‚æ•°: start, end, class_id (å¯é€‰)
   - è¿”å›ž: è®¡åˆ’åˆ—è¡¨ + é¢œè‰²æ¸å˜ä¿¡æ¯

2. **POST /teaching-plans** - åˆ›å»ºæ•™å­¦è®¡åˆ’
   - æƒé™: æ•™å¸ˆ
   - è¯·æ±‚ä½“: title, planned_date, class_id, description, duration_minutes, sync_to_students

3. **PUT /teaching-plans/{plan_id}** - æ›´æ–°æ•™å­¦è®¡åˆ’
   - æƒé™: æ•™å¸ˆ

4. **DELETE /teaching-plans/{plan_id}** - åˆ é™¤æ•™å­¦è®¡åˆ’
   - æƒé™: æ•™å¸ˆ

5. **POST /teaching-plans/sync-to-students/{plan_id}** - åŒæ­¥åˆ°å­¦ç”Ÿç«¯
   - æƒé™: æ•™å¸ˆ

### ä¸ªäººä»»åŠ¡ API (å‰ç¼€: /api/v1)
1. **GET /personal-tasks** - èŽ·å–ä¸ªäººä»»åŠ¡åˆ—è¡¨
   - æƒé™: å­¦ç”Ÿ
   - å‚æ•°: start, end, completed (å¯é€‰)
   - è¿”å›ž: ä»»åŠ¡åˆ—è¡¨ + é¢œè‰²å’Œå®ŒæˆçŠ¶æ€

2. **POST /personal-tasks** - åˆ›å»ºä¸ªäººä»»åŠ¡
   - æƒé™: å­¦ç”Ÿ
   - è¯·æ±‚ä½“: title, planned_date, duration_minutes, priority, description

3. **PUT /personal-tasks/{task_id}** - æ›´æ–°ä¸ªäººä»»åŠ¡
   - æƒé™: å­¦ç”Ÿ

4. **DELETE /personal-tasks/{task_id}** - åˆ é™¤ä¸ªäººä»»åŠ¡
   - æƒé™: å­¦ç”Ÿ

### æ•™å¸ˆç­çº§åˆ—è¡¨ API
- **GET /classes/my-classes** - èŽ·å–æ•™å¸ˆçš„ç­çº§åˆ—è¡¨
  - æƒé™: æ•™å¸ˆ
  - è¿”å›ž: ç­çº§åˆ—è¡¨ (ç”¨äºŽé€‰æ‹©ä¸‹æ‹‰æ¡†)

## ä¸‰ã€å‰ç«¯ç»„ä»¶ (å·²å®žçŽ°)

### 1. TeachingPlan.vue (æ•™å¸ˆç«¯)
ä½ç½®: `frontend/src/views/teacher/TeachingPlan.vue`

**åŠŸèƒ½ç‰¹æ€§:**
- âœ… æ—¥åŽ†è§†å›¾ - å¯è§†åŒ–æ˜¾ç¤ºæ•™å­¦è®¡åˆ’
- âœ… åˆ—è¡¨è§†å›¾ - è¡¨æ ¼å½¢å¼æ˜¾ç¤ºå…¨éƒ¨è®¡åˆ’
- âœ… è§†å›¾åˆ‡æ¢ - å¯åœ¨æ—¥åŽ†å’Œåˆ—è¡¨è§†å›¾é—´åˆ‡æ¢
- âœ… ç­çº§è¿‡æ»¤ - æ”¯æŒæŒ‰ç­çº§è¿‡æ»¤
- âœ… æ–°å¢žè®¡åˆ’ - å¼¹çª—è¡¨å•åˆ›å»ºæ–°è®¡åˆ’
- âœ… ç¼–è¾‘è®¡åˆ’ - å¯ä¿®æ”¹çŽ°æœ‰è®¡åˆ’
- âœ… åˆ é™¤è®¡åˆ’ - æ”¯æŒåˆ é™¤
- âœ… ä¸€é”®åŒæ­¥ - å°†è®¡åˆ’åŒæ­¥åˆ°å­¦ç”Ÿç«¯
- âœ… é¢œè‰²æ¸å˜æ˜¾ç¤º:
  - ç»¿è‰²: å‰©ä½™æ—¶é—´ > 2å‘¨
  - é»„è‰²: å‰©ä½™æ—¶é—´ 1å‘¨-2å‘¨
  - æ©™è‰²: å‰©ä½™æ—¶é—´ < 1å‘¨
  - çº¢è‰²: å‰©ä½™æ—¶é—´ = 1å¤©

### 2. Schedule.vue (å­¦ç”Ÿç«¯ - å·²å¢žå¼º)
ä½ç½®: `frontend/src/views/student/Schedule.vue`

**å¢žå¼ºåŠŸèƒ½:**
- âœ… æ—¥åŽ†è§†å›¾ + åˆ—è¡¨è§†å›¾åˆ‡æ¢
- âœ… æ˜¾ç¤ºæ•™å¸ˆä»»åŠ¡ (ä½œä¸š/è€ƒè¯•)
- âœ… æ˜¾ç¤ºå·²åŒæ­¥çš„æ•™å­¦è®¡åˆ’
- âœ… æ˜¾ç¤ºä¸ªäººä»»åŠ¡
- âœ… ä»»åŠ¡åˆ†ç±»æ˜¾ç¤º:
  - ðŸ“š æ•™å¸ˆä»»åŠ¡ (è“è‰²ã€å®žçº¿è¾¹æ¡†)
  - ðŸ“ ä¸ªäººä»»åŠ¡ (è™šçº¿è¾¹æ¡†)
- âœ… ä»»åŠ¡ç±»åž‹è¿‡æ»¤
- âœ… å®ŒæˆçŠ¶æ€è¿‡æ»¤
- âœ… ä¸ªäººä»»åŠ¡ç®¡ç†:
  - æ·»åŠ æ–°ä»»åŠ¡
  - æ ‡è®°å®Œæˆ/æœªå®Œæˆ
  - åˆ é™¤ä»»åŠ¡
- âœ… ä¼˜å…ˆçº§ç³»ç»Ÿ (ä½Ž/æ™®é€š/é«˜)
- âœ… é¢œè‰²æ¸å˜é€»è¾‘ä¸Žæ•™å¸ˆç«¯ä¸€è‡´
- âœ… ä¸´æœŸä»»åŠ¡é€šçŸ¥ (å³ä¸‹è§’æé†’)
  - æ˜¾ç¤º1å¤©å†…å³å°†åˆ°æœŸçš„ä»»åŠ¡
  - è‡ªåŠ¨æé†’ç³»ç»Ÿ

**æ—¥æœŸè‰²å½©å±•ç¤º:**
- ç»¿è‰²: å·²å®Œæˆ æˆ– å‰©ä½™ > 2å‘¨
- é»„è‰²: å‰©ä½™æ—¶é—´ 1å‘¨-2å‘¨
- æ©™è‰²: å‰©ä½™æ—¶é—´ < 1å‘¨
- çº¢è‰²: å‰©ä½™æ—¶é—´ â‰¤ 1å¤©

## å››ã€è·¯ç”±é…ç½® (å·²æ›´æ–°)

åœ¨ `frontend/src/router/index.js` ä¸­æ·»åŠ :
```javascript
import TeachingPlan from '../views/teacher/TeachingPlan.vue'

// åœ¨æ•™å¸ˆè·¯ç”±ä¸­æ·»åŠ 
{ path: 'teaching-plan', component: TeachingPlan }
```

è®¿é—®è·¯ç”±: `/teacher/teaching-plan`

## äº”ã€åŽç«¯é›†æˆ

### schedule.py æ›´æ–°
- å¢žå¼ºäº† `GET /schedule/events` ç«¯ç‚¹
- çŽ°åœ¨è¿”å›ž:
  1. æ•™å¸ˆå‘å¸ƒçš„ä½œä¸š/è€ƒè¯•
  2. å·²åŒæ­¥çš„æ•™å­¦è®¡åˆ’
  3. å­¦ç”Ÿçš„ä¸ªäººä»»åŠ¡

## å…­ã€æ ¸å¿ƒåŠŸèƒ½éªŒè¯æ¸…å•

### æ•™å¸ˆç«¯åŠŸèƒ½
- [x] åˆ›å»ºæ•™å­¦è®¡åˆ’
- [x] ç¼–è¾‘æ•™å­¦è®¡åˆ’
- [x] åˆ é™¤æ•™å­¦è®¡åˆ’
- [x] ä¸€é”®åŒæ­¥åˆ°å­¦ç”Ÿç«¯
- [x] æ—¥åŽ†è§†å›¾æ˜¾ç¤º
- [x] åˆ—è¡¨è§†å›¾æ˜¾ç¤º
- [x] ç­çº§è¿‡æ»¤
- [x] é¢œè‰²æ¸å˜æ˜¾ç¤º (4çº§)

### å­¦ç”Ÿç«¯åŠŸèƒ½
- [x] æŸ¥çœ‹æ•™å¸ˆä»»åŠ¡ (ä½œä¸š/è€ƒè¯•)
- [x] æŸ¥çœ‹å·²åŒæ­¥çš„æ•™å­¦è®¡åˆ’
- [x] åˆ›å»ºä¸ªäººä»»åŠ¡
- [x] ç¼–è¾‘ä¸ªäººä»»åŠ¡
- [x] åˆ é™¤ä¸ªäººä»»åŠ¡
- [x] æ ‡è®°ä»»åŠ¡å®Œæˆ
- [x] ä¼˜å…ˆçº§è®¾ç½® (é«˜/æ™®é€š/ä½Ž)
- [x] ä»»åŠ¡ç±»åž‹åŒºåˆ† (å¡ç‰‡æ ·å¼)
- [x] æ—¥åŽ†è§†å›¾ä¸Žåˆ—è¡¨è§†å›¾åˆ‡æ¢
- [x] ä»»åŠ¡è¿‡æ»¤ (ç±»åž‹/å®ŒæˆçŠ¶æ€)
- [x] ä¸´æœŸä»»åŠ¡é€šçŸ¥ç³»ç»Ÿ

## ä¸ƒã€æ•°æ®åº“è¿ç§»

è¿è¡Œè¿ç§»è„šæœ¬åˆ›å»ºæ–°è¡¨:
```bash
python migrate_teaching_plans.py
```

## å…«ã€ä½¿ç”¨è¯´æ˜Ž

### æ•™å¸ˆç«¯æ“ä½œæµç¨‹
1. ç™»å½•ç³»ç»Ÿ
2. å¯¼èˆªåˆ° "æ•™å­¦è®¡åˆ’åŠæ—¥åŽ†" æˆ–è®¿é—® `/teacher/teaching-plan`
3. é€‰æ‹©ç­çº§
4. ç‚¹å‡»"âž• æ·»åŠ è®¡åˆ’"åˆ›å»ºæ–°è®¡åˆ’
5. å¡«å†™æ ‡é¢˜ã€æ—¥æœŸã€æ—¶é•¿ç­‰ä¿¡æ¯
6. å‹¾é€‰"åŒæ­¥åˆ°å­¦ç”Ÿç«¯"åŽä¿å­˜
7. å­¦ç”Ÿå°†åœ¨è‡ªå·±çš„æ—¥ç¨‹ä¸­çœ‹åˆ°è¯¥è®¡åˆ’

### å­¦ç”Ÿç«¯æ“ä½œæµç¨‹
1. ç™»å½•ç³»ç»Ÿ
2. å¯¼èˆªåˆ°"æˆ‘çš„æ—¥ç¨‹"æˆ–è®¿é—® `/schedule`
3. åœ¨æ—¥åŽ†è§†å›¾æŸ¥çœ‹æ‰€æœ‰ä»»åŠ¡
4. å‹¾é€‰"æ˜¾ç¤ºæ•™å¸ˆä»»åŠ¡"/"æ˜¾ç¤ºä¸ªäººä»»åŠ¡"æŽ§åˆ¶æ˜¾ç¤º
5. ç‚¹å‡»"âž• æ·»åŠ ä»»åŠ¡"åˆ›å»ºä¸ªäººå­¦ä¹ è®¡åˆ’
6. å®Œæˆä»»åŠ¡åŽï¼Œç‚¹å‡»"æ ‡è®°å®Œæˆ"

## ä¹ã€æŠ€æœ¯ç»†èŠ‚

### é¢œè‰²æ¸å˜è®¡ç®—å‡½æ•°
```python
def get_event_color(planned_date):
    now = datetime.now()
    delta = planned_date - now
    
    if delta.days >= 14:
        return '#5cb85c'   # ç»¿è‰²
    elif 7 <= delta.days < 14:
        return '#f0ad4e'   # é»„è‰²
    elif 1 <= delta.days < 7:
        return '#d58a2d'   # æ©™è‰²
    elif delta.days == 0:
        return '#d9534f'   # çº¢è‰²
    else:
        return '#6c757d'   # ç°è‰²
```

## åã€åŽç»­å¯ä¼˜åŒ–æ–¹å‘

1. æ·»åŠ é€šçŸ¥ç³»ç»Ÿ (é‚®ä»¶/çŸ­ä¿¡æé†’)
2. æ‰¹é‡å¯¼å…¥æ•™å­¦è®¡åˆ’ (CSV/Excel)
3. æ•™å­¦è®¡åˆ’æ¨¡æ¿åº“
4. æ—¥ç¨‹å…±äº«åŠŸèƒ½
5. ä¸Žæ ¡åŽ†ç³»ç»Ÿé›†æˆ
6. ç§»åŠ¨ç«¯é€‚é…ä¼˜åŒ–
7. ç¦»çº¿è®¿é—®æ”¯æŒ

---

**å®žçŽ°çŠ¶æ€**: âœ… åŠŸèƒ½å®Œæ•´  
**æµ‹è¯•çŠ¶æ€**: å¾…éƒ¨ç½²æµ‹è¯•  
**éƒ¨ç½²æ—¥æœŸ**: 2026-01-17
